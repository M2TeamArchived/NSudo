(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{402:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"общая-библиотека-nsudo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#общая-библиотека-nsudo"}},[t._v("#")]),t._v(" Общая библиотека NSudo")]),t._v(" "),a("h2",{attrs:{id:"функция-nsudocreateprocess"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#функция-nsudocreateprocess"}},[t._v("#")]),t._v(" Функция NSudoCreateProcess")]),t._v(" "),a("p",[t._v("Создаёт новый процесс и его основной поток.")]),t._v(" "),a("h3",{attrs:{id:"прототип-на-c-c"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#прототип-на-c-c"}},[t._v("#")]),t._v(" Прототип на C/C++")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("EXTERN_C HRESULT WINAPI "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSudoCreateProcess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    _In_ NSUDO_USER_MODE_TYPE UserModeType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _In_ NSUDO_PRIVILEGES_MODE_TYPE PrivilegesModeType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _In_ NSUDO_MANDATORY_LABEL_TYPE MandatoryLabelType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _In_ NSUDO_PROCESS_PRIORITY_CLASS_TYPE ProcessPriorityClassType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _In_ NSUDO_SHOW_WINDOW_MODE_TYPE ShowWindowModeType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _In_ DWORD WaitInterval"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _In_ BOOL CreateNewConsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _In_ LPCWSTR CommandLine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _In_opt_ LPCWSTR CurrentDirectory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"параметр-usermodetype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-usermodetype"}},[t._v("#")]),t._v(" Параметр UserModeType")]),t._v(" "),a("p",[t._v("Значение из перечислимого типа NSUDO_USER_MODE_TYPE, которое идентифицирует пользовательский\nрежим.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_NSUDO_USER_MODE_TYPE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    TRUSTED_INSTALLER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    SYSTEM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    CURRENT_USER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    CURRENT_PROCESS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    CURRENT_PROCESS_DROP_RIGHT\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" NSUDO_USER_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("PNSUDO_USER_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"параметр-privilegesmodetype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-privilegesmodetype"}},[t._v("#")]),t._v(" Параметр PrivilegesModeType")]),t._v(" "),a("p",[t._v("Значение из перечислимого типа NSUDO_PRIVILEGES_MODE_TYPE, которое идентифицирует\nрежим привилегий.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_NSUDO_PRIVILEGES_MODE_TYPE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ENABLE_ALL_PRIVILEGES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    DISABLE_ALL_PRIVILEGES\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" NSUDO_PRIVILEGES_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("PNSUDO_PRIVILEGES_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"параметр-mandatorylabeltype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-mandatorylabeltype"}},[t._v("#")]),t._v(" Параметр MandatoryLabelType")]),t._v(" "),a("p",[t._v("Значение из перечислимого типа NSUDO_MANDATORY_LABEL_TYPE, которое идентифицирует\nобязательную метку.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_NSUDO_MANDATORY_LABEL_TYPE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    UNTRUSTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    LOW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MEDIUM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MEDIUM_PLUS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    HIGH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    SYSTEM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    PROTECTED_PROCESS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" NSUDO_MANDATORY_LABEL_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("PNSUDO_MANDATORY_LABEL_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"параметр-processpriorityclasstype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-processpriorityclasstype"}},[t._v("#")]),t._v(" Параметр ProcessPriorityClassType")]),t._v(" "),a("p",[t._v("Значение из перечислимого типа NSUDO_PROCESS_PRIORITY_CLASS_TYPE, которое\nидентифицирует класс приоритета процесса.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_NSUDO_PROCESS_PRIORITY_CLASS_TYPE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    IDLE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    BELOW_NORMAL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    NORMAL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ABOVE_NORMAL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    HIGH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    REALTIME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" NSUDO_PROCESS_PRIORITY_CLASS_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("PNSUDO_PROCESS_PRIORITY_CLASS_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"параметр-showwindowmodetype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-showwindowmodetype"}},[t._v("#")]),t._v(" Параметр ShowWindowModeType")]),t._v(" "),a("p",[t._v("Значение из перечислимого типа NSUDO_SHOW_WINDOW_MODE_TYPE, которое идентифицирует\nрежим ShowWindow.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_NSUDO_SHOW_WINDOW_MODE_TYPE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    SHOW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    HIDE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MAXIMIZE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MINIMIZE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" NSUDO_SHOW_WINDOW_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("PNSUDO_SHOW_WINDOW_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"параметр-waitinterval"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-waitinterval"}},[t._v("#")]),t._v(" Параметр WaitInterval")]),t._v(" "),a("p",[t._v("Интервал время ожидания для процесса, в миллисекундах.")]),t._v(" "),a("h3",{attrs:{id:"параметр-createnewconsole"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-createnewconsole"}},[t._v("#")]),t._v(" Параметр CreateNewConsole")]),t._v(" "),a("p",[t._v("Если этот параметр равен TRUE, новый процесс будет иметь новую консоль, вместо того\nчтобы наследовать консоль своего родителя (по умолчанию).")]),t._v(" "),a("h3",{attrs:{id:"параметр-commandline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-commandline"}},[t._v("#")]),t._v(" Параметр CommandLine")]),t._v(" "),a("p",[t._v("Командная строка, которая должна быть выполнена. Максимальная длина этой\nстроки составляет 32 тыс. символов, часть имени модуля в CommandLine ограничена\nMAX_PATH символами.")]),t._v(" "),a("h3",{attrs:{id:"параметр-currentdirectory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#параметр-currentdirectory"}},[t._v("#")]),t._v(" Параметр CurrentDirectory")]),t._v(" "),a("p",[t._v("Полный путь к текущему каталогу для процесса. Строка также может указывать UNC-путь.\nЕсли этот параметр равен nullptr, новый процесс будет иметь тот же текущий диск\nи каталог, что и вызывающий процесс. (Эта возможность предусмотрена в основном\nдля оболочек, которым необходимо запустить приложение и указать его\nначальный диск и рабочий каталог.)")]),t._v(" "),a("h3",{attrs:{id:"обратное-значение"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#обратное-значение"}},[t._v("#")]),t._v(" Обратное значение")]),t._v(" "),a("p",[t._v("HRESULT. При успешном выполнении функции возвращаемое значение равно S_OK.")]),t._v(" "),a("h2",{attrs:{id:"c-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#c-api"}},[t._v("#")]),t._v(" C# API")]),t._v(" "),a("p",[t._v("Загрузите сборку M2.NSudo в свой проект, и вы узнаете, как её использовать.")]),t._v(" "),a("h3",{attrs:{id:"пример"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#пример"}},[t._v("#")]),t._v(" Пример")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("M2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NSudo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Demo")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Program")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSudoInstance")]),t._v(" instance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constructor-invocation class-name"}},[t._v("NSudoInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateProcess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                NSUDO_USER_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TRUSTED_INSTALLER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                NSUDO_PRIVILEGES_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ENABLE_ALL_PRIVILEGES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                NSUDO_MANDATORY_LABEL_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SYSTEM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                NSUDO_PROCESS_PRIORITY_CLASS_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NORMAL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                NSUDO_SHOW_WINDOW_MODE_TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cmd"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            Console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ReadKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);